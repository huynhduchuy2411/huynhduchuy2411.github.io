function productAddToCart(t,a){jQuery.ajax({type:"post",url:"/cart/add.js",data:"quantity="+a+"&id="+t,dataType:"json",success:function(t){var a=$("#cartmessage .title-success").text();a+="<a href="+t.url+">"+t.title+"</a>"+" - "+t.quantity+" x "+theme.Currency.formatMoney(t.discounted_price,theme.moneyFormat),$.notify({message:a},{type:"success",offset:0,placement:{from:"top",align:"center"},z_index:9999,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},template:'<div data-notify="container" class="col-xs-12 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'}),adjustCartDropDown(),$(".qv-addToCart span.instock").show(),$(".qv-addToCart span.adding").hide(),$(".nm-addToCart").removeClass("adding")},error:function(t,a){var e=$("#cartmessage .title-failed").text();e+=t.responseJSON.description,$.notify({message:e},{type:"danger",offset:0,placement:{from:"top",align:"center"},z_index:9999,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},template:'<div data-notify="container" class="col-xs-12 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'}),$(".qv-addToCart span.instock").show(),$(".qv-addToCart span.adding").hide(),$(".nm-addToCart").removeClass("adding")}})}jQuery(document).ready(function(t){var a={},e=[],n=[],r=!1;function s(){var r=!1,s=0;for(i=0;i<e.length;){if(o(e[i],a)&&(s=i),o(e[i],a)&&n[i]){r=!0;break}i++}t('#qv-quantity select[name="id"] option').each(function(a){t(this).removeAttr("selected","selected")}),t('#qv-quantity select[name="id"] option').eq(s).prop("selected","selected"),t("#qv-product-cover #main-thumbnail").attr("src",t('#qv-quantity select[name="id"] option').eq(s).data("featuredimg")),t("#qv-productprice .qv-regularprice").html(t('#qv-quantity select[name="id"] option').eq(s).data("price")),t("#qv-productprice .qv-discountprice").html(t('#qv-quantity select[name="id"] option').eq(s).data("compareatprice")),r?(t("#quickviewModal .qv-addToCart").addClass("enable"),t("#quickviewModal .qv-addToCart span.instock").show(),t("#quickviewModal .qv-addToCart span.outstock").hide()):(t("#quickviewModal .qv-addToCart.enable").removeClass("enable"),t("#quickviewModal .qv-addToCart span.instock").hide(),t("#quickviewModal .qv-addToCart span.outstock").show())}function o(t,a){var e=!0;for(var i in t)t[i]!=a[i]&&(e=!1);return e}t(document).on("click",".quick-view",function(){a={},e=[],n=[],variantPrices=[],variantCompareAtPrices=[];var i=t(this).parents(".grid__item,.list__item"),o=i.find(".grid-view-item__title").text(),d=i.find(".product-desc").html(),c=i.find(".grid-view-item__meta").html(),l=i.find(".spr-badge").html(),p=i.find(".discount-percentage").html(),u=i.find(".qv-cartmain").html();t("#main-thumbnail").attr("src",i.find(".imgurl-for-quickview span").first().text()),i.find(".imgurl-for-quickview span").each(function(a){var e="<div class='thumb-item'><img src='"+t(this).text()+"'></div>";qvthumbnails.trigger("add.owl.carousel",e).trigger("refresh.owl.carousel")}),t("#qv-productname").html(o),t("#qv-productprice").html(c),t("#qv-spr-badge").html(l),t("#qv-productdescription").html(d),t("#qv-discount").html(p),t("#qv-quantity").html(u),(r=t("#qv-quantity .selector-wrapper").length>0)&&(e=[],t('#qv-quantity select[name="id"] > option').each(function(a){for(var i=t(this).text().split("/"),r={},s=0;s<i.length;s++)r["option"+(s+1)]=i[s].trim();e.push(r),n.push(t(this).data("available")),variantPrices.push(t(this).data("price")),variantCompareAtPrices.push(t(this).data("compareatprice"))}),a={},t("#qv-quantity .selector-wrapper").each(function(e){a["option"+(e+1)]=t(this).find("select.single-option-selector").val()}),s()),t(".qv-addToCart span.adding").hide(),t("#quickviewModal").modal("show")}),t(document).on("click","#qv-thumbnails img",function(){t("#main-thumbnail").attr("src",t(this).attr("src"))}),t(document).on("change","#qv-quantity select.single-option-selector",function(){r&&(a[t(this).data("index")]=t(this).val(),s())}),t(document).on("click","#qv-quantity .qv-addToCart.enable",function(){var a,e;t(".cart-display #cart-container").hasClass("in")&&(t(".cart-display #cart-container").removeClass("in"),t(".cart-display .cart-title").addClass("collapsed"),t(".cart-display .cart-title").attr("aria-expanded","false")),a=t('#qv-quantity select[name="id"] option:selected').val(),e=t('#qv-quantity input[name="quantity"]').val(),t(".qv-addToCart span.instock").hide(),t(".qv-addToCart span.outstock").hide(),t(".qv-addToCart span.adding").show(),productAddToCart(a,e)}),t(document).on("click",".cart-product-page .product-addToCart",function(){productAddToCart(t('.product-selection .cart-product-page select[name="id"] option:selected').val(),t('.product-selection .cart-product-page input[name="quantity"]').val()),t(".cart-display #cart-container").hasClass("in")&&(t(".cart-display #cart-container").removeClass("in"),t(".cart-display .cart-title").addClass("collapsed"),t(".cart-display .cart-title").attr("aria-expanded","false"))}),t(document).on("click",".ishi-quickview-swatch .ishi-custom-swatch .custom-swatch",function(){t(this).parent().find(".custom-swatch").removeClass("active"),t(this).addClass("active");var a=t(this).parent().data("selector"),e=t(this).data("index");t('#qv-quantity select[data-index="'+a+'"] option').eq(e).prop("selected",!0).trigger("change")}),t("#quickviewModal").on("hide.bs.modal",function(){for(var a=t("#qv-thumbnails .owl-item").length,e=0;e<a;e++)qvthumbnails.trigger("remove.owl.carousel",e)})});